<div class="container mt-4">
  <h2>Bitácora de Vigilancia</h2>

  <!-- Tabla de entradas -->
  <table class="table table-striped table-bordered">
    <thead class="thead-dark">
      <tr>
        <th scope="col">Fecha</th>
        <th scope="col">Hora del Incidente</th>
        <th scope="col">Turno</th>
        <th scope="col">Tipo de Incidente</th>
        <th scope="col">Descripción</th>
        <th scope="col">Información Adicional</th>
        <th scope="col">Acciones</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let entry of logEntries">
        <td>{{ entry.fecha }}</td>
        <td>{{ entry.horaIncidente }}</td>
        <td>{{ entry.turno }}</td>
        <td>{{ entry.tipoIncidente }}</td>
        <td>{{ entry.descripcion }}</td>
        <td>{{ entry.informacionAdicional }}</td>
        <td>
          <button class="btn btn-primary btn-sm" (click)="editEntry(entry)">Editar</button>
          <button class="btn btn-danger btn-sm" (click)="deleteEntry(entry)">Borrar</button>
        </td>
      </tr>
    </tbody>
  </table>

  <!-- Formulario para agregar/editar entrada -->
  <div class="mt-4">
    <h3 *ngIf="!editingEntry">Agregar Nueva Entrada</h3>
    <h3 *ngIf="editingEntry">Editar Entrada</h3>

    <form (ngSubmit)="editingEntry ? saveEntry() : addLogEntry()">
      <div class="form-group">
        <label for="fecha">Fecha</label>
        <input
          id="fecha"
          type="date"
          class="form-control"
          [(ngModel)]="currentEntry.fecha"
          [ngModelOptions]="{ standalone: true }"
          name="fecha"
          required
        />
      </div>

      <div class="form-group">
        <label for="horaIncidente">Hora del Incidente</label>
        <input
          id="horaIncidente"
          type="time"
          class="form-control"
          [(ngModel)]="currentEntry.horaIncidente"
          [ngModelOptions]="{ standalone: true }"
          name="horaIncidente"
          required
        />
      </div>

      <div class="form-group">
        <label for="turno">Turno</label>
        <input
          id="turno"
          type="text"
          class="form-control"
          [(ngModel)]="currentEntry.turno"
          [ngModelOptions]="{ standalone: true }"
          name="turno"
          required
        />
      </div>

      <div class="form-group">
        <label for="tipoIncidente">Tipo de Incidente</label>
        <input
          id="tipoIncidente"
          type="text"
          class="form-control"
          [(ngModel)]="currentEntry.tipoIncidente"
          [ngModelOptions]="{ standalone: true }"
          name="tipoIncidente"
          required
        />
      </div>

      <div class="form-group">
        <label for="descripcion">Descripción</label>
        <textarea
          id="descripcion"
          class="form-control"
          [(ngModel)]="currentEntry.descripcion"
          [ngModelOptions]="{ standalone: true }"
          name="descripcion"
          required
        ></textarea>
      </div>

      <div class="form-group">
        <label for="informacionAdicional">Información Adicional</label>
        <textarea
          id="informacionAdicional"
          class="form-control"
          [(ngModel)]="currentEntry.informacionAdicional"
          [ngModelOptions]="{ standalone: true }"
          name="informacionAdicional"
        ></textarea>
      </div>

      <button type="submit" class="btn btn-success" *ngIf="!editingEntry">Agregar</button>
      <button type="submit" class="btn btn-success" *ngIf="editingEntry">Guardar</button>
      <button type="button" class="btn btn-secondary" (click)="cancelEdit()" *ngIf="editingEntry">Cancelar</button>
    </form>
  </div>
</div>
